import streamlit as st

st.title('ğŸ–¼ï¸ yt-img-app')
st.header('YouTube ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì¶”ì¶œê¸° ì•±')

with st.expander('ì´ ì•±ì— ëŒ€í•˜ì—¬'):
  st.write('ì´ ì•±ì€ YouTube ë™ì˜ìƒì˜ ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.')

# ì´ë¯¸ì§€ ì„¤ì •
st.sidebar.header('ì„¤ì •')
img_dict = {'Max': 'maxresdefault', 'High': 'hqdefault', 'Medium': 'mqdefault', 'Standard': 'sddefault'}
selected_img_quality = st.sidebar.selectbox('ì´ë¯¸ì§€ í’ˆì§ˆ ì„ íƒ', ['Max', 'High', 'Medium', 'Standard'])
img_quality = img_dict[selected_img_quality]

yt_url = st.text_input('YouTube URL ë¶™ì—¬ë„£ê¸°', 'https://youtu.be/JwSS70SZdyM')

def get_ytid(input_url):
  if 'youtu.be' in input_url:
    ytid = input_url.split('/')[-1]
  elif 'youtube.com' in input_url:
    # handle URLs like: https://www.youtube.com/watch?v=VIDEO_ID
    if 'v=' in input_url:
      ytid = input_url.split('v=')[-1].split('&')[0]
    else:
      ytid = input_url.split('/')[-1]
  else:
    ytid = ''
  return ytid

# YouTube ì¸ë„¤ì¼ ì´ë¯¸ì§€ í‘œì‹œ
if yt_url and yt_url.strip() != '':
  ytid = get_ytid(yt_url)
  if ytid:
    yt_img = f'https://img.youtube.com/vi/{ytid}/{img_quality}.jpg'
    st.image(yt_img, caption=f'YouTube ID: {ytid} | í’ˆì§ˆ: {selected_img_quality}')
    st.write('YouTube ë™ì˜ìƒ ì¸ë„¤ì¼ ì´ë¯¸ì§€ URL: ', yt_img)
  else:
    st.error('ìœ íš¨í•œ YouTube URLì„ ì…ë ¥í•˜ì„¸ìš”.')
else:
  st.info('â˜ï¸ URLì„ ì…ë ¥í•´ ê³„ì†í•˜ì„¸ìš” ...')
